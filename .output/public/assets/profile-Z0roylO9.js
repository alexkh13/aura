import{u as b,a as y,j as e,P as j,U as h}from"./main-DwSGQJQP.js";import{a as N,b as p,u as v,c as k}from"./useData-CfHr73R5.js";import{C as f}from"./chevron-left-BaNQVTVO.js";import{C as w}from"./check-B7ifIDri.js";import{T as P}from"./trash-2-DjgZj84f.js";import{S as D}from"./star-CXyQrqay.js";function U(){const s=b(),{data:a,isLoading:c}=N(),{activeProfile:n,setActiveProfile:d}=y(),x=p(),m=t=>{d(t)},g=()=>{s({to:"/profiles/new"})},u=async(t,l)=>{if(confirm(`Are you sure you want to delete "${l}"? This action cannot be undone.`))try{if(a?.find(r=>r.id===t)?.isDefault&&a&&a.filter(i=>i.isDefault).length<=1){alert("Cannot delete the only default profile");return}if(await x.mutateAsync(t),n?.id===t&&a){const r=a.filter(i=>i.id!==t);r.length>0&&d(r[0])}}catch(o){alert(o.message||"Failed to delete profile")}};return c?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950 pb-20",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800 px-4 py-4 sticky top-16 z-10",children:e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300 font-medium",children:[e.jsx(f,{className:"w-5 h-5"}),"Profiles"]})}),e.jsx("div",{className:"px-4 py-8 text-center text-gray-500 dark:text-gray-400",children:"Loading profiles..."})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950 pb-20",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800 px-4 py-4 sticky top-16 z-10",children:e.jsxs("button",{onClick:()=>s({to:"/"}),className:"flex items-center gap-2 text-gray-700 dark:text-gray-300 font-medium",children:[e.jsx(f,{className:"w-5 h-5"}),"Profiles"]})}),e.jsxs("div",{className:"px-4 py-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"My Profiles"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Switch between wardrobes or create a new one"})]})}),e.jsxs("button",{onClick:g,className:"w-full py-4 px-4 bg-blue-500 dark:bg-blue-600 text-white rounded-xl font-medium hover:bg-blue-600 dark:hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(j,{className:"w-5 h-5"}),"Create New Profile"]}),e.jsx("div",{className:"space-y-3",children:a&&a.length>0?a.map((t,l)=>{const o=a.findIndex(i=>i.isDefault),r=!t.isDefault||t.isDefault&&l!==o;return e.jsx(C,{profile:t,isActive:n?.id===t.id,canDelete:r,onSelect:()=>m(t),onDelete:()=>u(t.id,t.name)},t.id)}):e.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(h,{className:"w-12 h-12 mx-auto mb-3 opacity-40"}),e.jsx("p",{children:"No profiles found"})]})})]})]})})}function C({profile:s,isActive:a,canDelete:c,onSelect:n,onDelete:d}){const{data:x}=v(s.id),{data:m}=k(s.id),g=x?.length||0,u=m?.length||0,t=l=>{l.stopPropagation(),d()};return e.jsxs("div",{className:`relative w-full text-left p-5 rounded-xl border-2 transition-all ${a?"border-blue-500 dark:border-blue-500 bg-blue-50 dark:bg-blue-950/30":"border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 hover:border-gray-300 dark:hover:border-gray-700"}`,children:[e.jsx("div",{className:"absolute top-3 right-3",children:a?e.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-500 dark:bg-blue-600 flex items-center justify-center",children:e.jsx(w,{className:"w-4 h-4 text-white"})}):c?e.jsx("button",{onClick:t,className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-950/30 rounded-lg transition-colors",title:"Delete profile",children:e.jsx(P,{className:"w-4 h-4"})}):null}),e.jsxs("button",{onClick:n,className:"w-full text-left pr-10",children:[e.jsx("div",{className:"flex items-start mb-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-lg ${s.avatar?"bg-gray-100 dark:bg-gray-800":"bg-gradient-to-br from-blue-100 to-indigo-100 dark:from-blue-950 dark:to-indigo-950"}`,children:s.avatar||e.jsx(h,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:s.name}),s.isDefault&&e.jsx(D,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"})]}),s.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-0.5",children:s.description})]})]})}),e.jsxs("div",{className:"flex gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:g}),"items"]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:u}),"outfits"]})]})]})]})}export{U as component};
