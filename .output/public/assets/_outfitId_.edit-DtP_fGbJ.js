import{u as j,e as N,a as v,r as g,j as e,S as m}from"./main-DwSGQJQP.js";import{u as w,i as C,k as S}from"./useData-CfHr73R5.js";import{C as I}from"./chevron-left-BaNQVTVO.js";import{X as P}from"./x-ev_B8KbH.js";function D(){const d=j(),{outfitId_:y}=N.useParams(),l=y,{activeProfile:h}=v(),{data:n}=w(h?.id),{data:r,isLoading:f}=C(l),i=S(),[a,s]=g.useState({name:"",season:"",occasion:"",weather:"",tags:"",notes:""}),[o,u]=g.useState([]);g.useEffect(()=>{r&&(s({name:r.name||"",season:r.season||"",occasion:r.occasion||"",weather:r.weather||"",tags:r.tags||"",notes:r.notes||""}),u(r.itemIds||[]))},[r]);const x=t=>{u(c=>c.includes(t)?c.filter(k=>k!==t):[...c,t])},b=n?.filter(t=>o.includes(t.id))||[],p=async()=>{if(!a.name||!a.season){alert("Please fill in the required fields: Name and Season");return}if(o.length===0){alert("Please select at least one item for the outfit");return}try{await i.mutateAsync({id:l,data:{name:a.name,season:a.season,itemIds:o,occasion:a.occasion||void 0,weather:a.weather||void 0,tags:a.tags||void 0,notes:a.notes||void 0}}),d({to:"/outfits/$outfitId",params:{outfitId:l}})}catch(t){console.error("Failed to update outfit:",t),alert("Failed to save outfit. Please try again.")}};return f?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading outfit..."})]})}):r?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950 pb-20",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800 px-4 py-4 sticky top-16 z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{type:"button",onClick:()=>d({to:"/outfits/$outfitId",params:{outfitId:l}}),className:"flex items-center gap-2 text-gray-700 dark:text-gray-300 font-medium",children:[e.jsx(I,{className:"w-5 h-5"}),"Edit Outfit"]}),e.jsx("button",{type:"button",onClick:p,disabled:i.isPending,className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i.isPending?"Saving...":"Save"})]})}),e.jsxs("div",{className:"px-4 py-6 space-y-6",children:[e.jsxs("section",{className:"bg-white dark:bg-gray-900 rounded-2xl p-6 shadow-sm border border-gray-200 dark:border-gray-800",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Outfit Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Outfit Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",placeholder:"e.g., Casual Weekend Look",value:a.name,onChange:t=>s({...a,name:t.target.value}),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-colors"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Season ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",placeholder:"e.g., Spring/Summer, Fall, Winter, All Season",value:a.season,onChange:t=>s({...a,season:t.target.value}),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Occasion"}),e.jsx("input",{type:"text",placeholder:"e.g., Casual, Formal, Date Night",value:a.occasion,onChange:t=>s({...a,occasion:t.target.value}),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Weather"}),e.jsx("input",{type:"text",placeholder:"e.g., Sunny, Rainy, Cold",value:a.weather,onChange:t=>s({...a,weather:t.target.value}),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tags"}),e.jsx("input",{type:"text",placeholder:"e.g., #casual #comfortable",value:a.tags,onChange:t=>s({...a,tags:t.target.value}),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes"}),e.jsx("textarea",{rows:3,placeholder:"Add notes...",value:a.notes,onChange:t=>s({...a,notes:t.target.value}),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-colors resize-none"})]})]})]}),e.jsxs("section",{className:"bg-white dark:bg-gray-900 rounded-2xl p-6 shadow-sm border border-gray-200 dark:border-gray-800",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:["Select Items (",o.length," selected)"]}),n&&n.length>0?e.jsx("div",{className:"grid grid-cols-4 gap-3 mb-6",children:n.map(t=>e.jsxs("button",{type:"button",onClick:()=>x(t.id),className:`flex flex-col items-center gap-2 p-3 rounded-xl border-2 transition-colors ${o.includes(t.id)?"border-blue-500 bg-blue-50 dark:bg-blue-950":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-100 to-indigo-100 dark:from-blue-900 dark:to-indigo-900 rounded-lg flex items-center justify-center overflow-hidden",children:t.hasPhoto&&t.photo?e.jsx("img",{src:t.photo,alt:t.name,className:"w-full h-full object-cover"}):e.jsx(m,{className:"w-6 h-6 text-blue-400 dark:text-blue-600"})}),e.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 text-center truncate w-full",children:t.name})]},t.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"No items found in your wardrobe"}),e.jsx("button",{type:"button",onClick:()=>d({to:"/items/new"}),className:"text-blue-600 dark:text-blue-400 hover:underline",children:"Add your first item"})]}),b.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-800 dark:text-gray-100 mb-3",children:"Selected Items"}),e.jsx("div",{className:"space-y-2",children:b.map(t=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-100 to-indigo-100 dark:from-blue-900 dark:to-indigo-900 rounded-lg flex items-center justify-center flex-shrink-0 overflow-hidden",children:t.hasPhoto&&t.photo?e.jsx("img",{src:t.photo,alt:t.name,className:"w-full h-full object-cover"}):e.jsx(m,{className:"w-6 h-6 text-blue-400 dark:text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800 dark:text-gray-100 text-sm",children:t.name}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:t.category})]}),e.jsx("button",{type:"button",onClick:()=>x(t.id),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors",children:e.jsx(P,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})})]},t.id))})]})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-600 dark:text-red-400",children:"Outfit not found"}),e.jsx("button",{type:"button",onClick:()=>d({to:"/outfits"}),className:"mt-4 text-blue-600 dark:text-blue-400 hover:underline",children:"Back to Outfits"})]})})}export{D as component};
